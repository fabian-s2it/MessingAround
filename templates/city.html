<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/ripples.min.css" rel="stylesheet">
    <link href="/static/css/material-wfont.min.css" rel="stylesheet">
    <link href="/static/css/custom.css" rel="stylesheet">

</head>
<body>
    <div id="house1" style="position:absolute;margin-left:0px;margin-top:50px;width:500px;height:1000px">
    <pre>                           (   )
                          (    )
                           (    )
                          (    )
                            )  )
                           (  (                  /\
                            (_)                 /  \  /\
                    ________[_]________      /\/    \/  \
           /\      /\        ______    \    /   /\/\  /\/\
          /  \    //_\       \    /\    \  /\/\/    \/    \
   /\    / /\/\  //___\       \__/  \    \/
  /  \  /\/    \//_____\       \ |[]|     \
 /\/\/\/       //_______\       \|__|      \
/      \      /XXXXXXXXXX\                  \
        \    /_I_II  I__I_\__________________\
               I_I|  I__I_____[]_|_[]_____I
               I_II  I__I_____[]_|_[]_____I
               I II__I  I     XXXXXXX     I
            ~~~~~"   "~~~~~~~~~~~~~~~~~~~~~~~~
    </pre>
    </div>


<div id="house2" style="position:absolute;margin-left:600px;margin-top:50px;width:400px;height:1000px">
    General Store
<pre>    ) )        /\
   =====      /  \
  _|___|_____/ __ \____________
 |::::::::::/ |  | \:::::::::::|
 |:::::::::/  ====  \::::::::::|
 |::::::::/__________\:::::::::|
 |_________|  ____  |__________|
  | ______ | / || \ | _______ |
  ||  |   || ====== ||   |   ||
  ||--+---|| |    | ||---+---||
  ||__|___|| |   o| ||___|___||
  |========| |____| |=========|
 (^^-^^^^^-|________|-^^^--^^^)
 (,, , ,, ,/________\,,,, ,, ,)
','',,,,' /__________\,,,',',;;</pre>
<button class="btn btn-raised btn-primary btn-xs" id="btnEnterGeneralStore">Enter</button>
</div>

<div id="whosonline"><ul></ul></div>



<div id="hud">
    <div id="bars">
        HP
        <div class="progress hp-bar">
            <div class="progress-bar progress-bar-success" style="width: 100%"></div>
        </div>
        MANA
        <div class="progress mana-bar">
            <div class="progress-bar progress-bar-info" style="width: 100%"></div>
        </div>


        <textarea id="event-log"></textarea>
    </div>


    <div id="inventory">
        <div id="empty" class="armor-piece"><img src='/static/sprites/empty.png' id="helmet-icon" class="icon-empty"/></div>
        <div id="helmet" class="armor-piece"><img src='/static/sprites/golden_helmet.gif' id="helmet-icon" class="icon-armor-piece"/></div>
        <div id="empty" class="armor-piece"><img src='/static/sprites/empty.png' id="helmet-icon" class="icon-empty"/></div>

        <div id="helmet" class="armor-piece"><img src='/static/sprites/firesword.gif' id="helmet-icon" class="icon-armor-piece"/></div>
        <div id="helmet" class="armor-piece"><img src='/static/sprites/hero_armor.png' id="helmet-icon" class="icon-armor-piece"/></div>
        <div id="helmet" class="armor-piece"><img src='/static/sprites/firesword.gif' id="helmet-icon" class="icon-armor-piece"/></div>

        <div id="empty" class="armor-piece"><img src='/static/sprites/empty.png' id="helmet-icon" class="icon-empty"/></div>
        <div id="helmet" class="armor-piece"><img src='/static/sprites/empty.png' id="helmet-icon" class="icon-armor-piece"/></div>
        <div id="helmet" class="armor-piece"><img src='/static/sprites/empty.png' id="helmet-icon" class="icon-armor-piece"/></div>

        <div id="empty" class="armor-piece"><img src='/static/sprites/empty.png' id="helmet-icon" class="icon-empty"/></div>
        <div id="helmet" class="armor-piece"><img src='/static/sprites/crown_boots.png' id="helmet-icon" class="icon-armor-piece"/></div>
        <div id="empty" class="armor-piece"><img src='/static/sprites/empty.png' id="helmet-icon" class="icon-empty"/></div>

    </div>


    <div id="stats">
        <p class="attribute"><b>ATK:</b> <span id="atk">0</span></p>
        <p class="attribute"><b>DEF:</b> <span id="atk">0</span></p>
        <p class="attribute"><b>ATK_SPD:</b> <span id="atk">0</span></p>
        <p class="attribute"><b>STAMINA:</b> <span id="atk">0</span></p>
    </div>

    <div id="backpack">

    </div>

</div>


<script type="text/javascript" src="//code.jquery.com/jquery-2.1.3.min.js"></script>
     <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
     <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

     <script src="/static/js/ripples.min.js"></script>
     <script src="/static/js/material.min.js"></script>

     <script>
        $(document).ready(function() {
            $.material.init();
            namespace = ''; // change to an empty string to use the global namespace

            function addEventToLog(sender, msg) {
                $('#event-log').append(sender +': ' + msg + '\n');
            }

            // the socket.io documentation recommends sending an explicit package upon connection
            // this is specially important when using the global namespace
            var socket = io.connect('http://' + document.domain + ':' + location.port + namespace);
            socket.on('connect', function() {
                socket.emit('connecting', {data: 'I\'m connected!'});
            });

            socket.on('ack-connected', function(data){
                var char = JSON.parse(data.character);
                var inventory = JSON.parse(data.inventory);

                //console.log(inventory);
                addEventToLog(char.nickname, 'connected');
            });

            socket.on('test-json', function(data) {
                console.log(JSON.parse(data.character_list[1]));

                for (var x = 0; x < data.character_list.length; x++) {
                    var char = JSON.parse(data.character_list[x]);

                    $('#whosonline ul').append('<li id="'+char.unique_id+'">'+char.nickname+'</li>');
                }
            });

            // event handler for server sent data
            // the data is displayed in the "Received" section of the page
            socket.on('my response', function(msg) {
                $('#log').append('<br>Received #' + msg.count + ': ' + msg.data);
            });

            // handlers for the different forms in the page
            // these send data to the server in a variety of ways
            $('form#emit').submit(function(event) {
                socket.emit('my event', {data: $('#emit_data').val()});
                return false;
            });
            $('form#broadcast').submit(function(event) {
                socket.emit('my broadcast event', {data: $('#broadcast_data').val()});
                return false;
            });
        });
     </script>
</body>
</html>